document.querySelectorAll('.option-<%= @post.id %>').forEach((heart) => {
  heart.classList.remove('card-option-button')
  const currentVoteStatus = (<%=@vote_count%> > <%=@other_vote_count%>) ? 'win' : ((<%=@vote_count%> == <%=@other_vote_count%>) ? 'tie' : 'lose');
  const otherVoteStatus = (<%=@vote_count%> > <%=@other_vote_count%>) ? 'lose' : ((<%=@vote_count%> == <%=@other_vote_count%>) ? 'tie' : 'win');
  if (heart.dataset.optionId === "<%= @post_vote.post_option.id %>"){
      heart.classList.add(`card-${currentVoteStatus}-result-button`);
      heart.parentNode.parentNode.querySelector('.opt').classList.add(`border-${currentVoteStatus}`);
      heart.classList.add('flip-in-hor-bottom');
      heart.innerHTML = "<%= @vote_count %> <%="vote".pluralize(@vote_count)%>";
   } else {
    heart.classList.add(`card-${otherVoteStatus}-result-button`);
    heart.parentNode.parentNode.querySelector('.opt').classList.add(`border-${otherVoteStatus}`);
    heart.classList.add('flip-in-hor-bottom');
    heart.innerHTML = "<%= @other_vote_count %> <%="vote".pluralize(@other_vote_count)%>";
  }
});

// document.querySelectorAll('.opt-card-<%#= option.post.id %>').forEach((card) => {
//   console.log(card);
// });

  <% if @post_vote.errors.any? %>
    myAlert = document.createElement('div');
    myAlert.innerHTML = '<div class="alert-card">You have already voted</div>';
    myAlert.classList.add('alert-box');

    myAlert.classList.add('fade-in');


    setTimeout(function() {
      myAlert.classList.add('shake-horizontal');
    }, 150);

        setTimeout(function() {
      myAlert.classList.add('disappear');
    }, 1200);


    myAlert.setAttribute('id', 'alert');

    myAlert.addEventListener('click', (event) => {
      event.currentTarget.parentNode.removeChild(event.currentTarget);
    })
    document.getElementById('js-errors').innerHTML = "";
    document.getElementById('js-errors').appendChild(myAlert);

  <% end %>
